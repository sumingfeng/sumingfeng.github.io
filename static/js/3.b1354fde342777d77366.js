webpackJsonp([3,4],{46:function(e,t){"use strict";$.fn.extend({_opt:{placeholader:"<p>请输入文章正文内容</p>",validHtml:[],limitSize:3,showServer:!1},artEditor:function(e){var t=this,a={"-webkit-user-select":"text","user-select":"text","overflow-y":"auto","text-break":"brak-all",outline:"none"};$(this).css(a).attr("contenteditable",!0),t._opt=$.extend(t._opt,e);try{$(t._opt.imgTar).on("change",function(e){var a=e.target.files[0];if(Math.ceil(a.size/1024/1024)>t._opt.limitSize)return void console.error("文件太大");var i=new FileReader;i.readAsDataURL(a),i.onload=function(e){if(t._opt.showServer)return void t.upload(e.target.result);var a='<img src="'+e.target.result+'" style="width:auto;max-height:200px" />';t.insertImage(a)}}),t.placeholderHandler(),t.pasteHandler()}catch(i){console.log(i)}t._opt.formInputId&&$("#"+t._opt.formInputId)[0]&&$(t).on("input",function(){$("#"+t._opt.formInputId).val(t.getValue())})},upload:function(e){var t=this;t._opt.uploadField,$.ajax({url:t._opt.uploadUrl,type:"post",data:$.extend(t._opt.data,{filed:e}),cache:!1}).then(function(e){var a=t._opt.uploadSuccess(e);if(a){var i='<img src="'+a+'" style="width:auto;max-height:200px" />';t.insertImage(i)}else t._opt.uploadError(e)})},insertImage:function(e){$(this).focus();var t=window.getSelection?window.getSelection():document.selection,a=t.createRange?t.createRange():t.getRangeAt(0);if(window.getSelection){a.collapse(!1);for(var i=a.createContextualFragment(e),o=i.lastChild;o&&"br"==o.nodeName.toLowerCase()&&o.previousSibling&&"br"==o.previousSibling.nodeName.toLowerCase();){var r=o;o=o.previousSibling,i.removeChild(r)}a.insertNode(a.createContextualFragment("<br/>")),a.insertNode(i),o&&(a.setEndAfter(o),a.setStartAfter(o)),t.removeAllRanges(),t.addRange(a)}else a.pasteHTML(e),a.collapse(!1),a.select();this._opt.formInputId&&$("#"+this._opt.formInputId)[0]&&$("#"+this._opt.formInputId).val(this.getValue())},pasteHandler:function(){var e=this;$(this).on("paste",function(t){console.log(t.clipboardData.items);var a=$(this).html();console.log(a),valiHTML=e._opt.validHtml,a=a.replace(/_moz_dirty=""/gi,"").replace(/\[/g,"[[-").replace(/\]/g,"-]]").replace(/<\/ ?tr[^>]*>/gi,"[br]").replace(/<\/ ?td[^>]*>/gi,"&nbsp;&nbsp;").replace(/<(ul|dl|ol)[^>]*>/gi,"[br]").replace(/<(li|dd)[^>]*>/gi,"[br]").replace(/<p [^>]*>/gi,"[br]").replace(new RegExp("<(/?(?:"+valiHTML.join("|")+")[^>]*)>","gi"),"[$1]").replace(new RegExp('<span([^>]*class="?at"?[^>]*)>',"gi"),"[span$1]").replace(/<[^>]*>/g,"").replace(/\[\[\-/g,"[").replace(/\-\]\]/g,"]").replace(new RegExp("\\[(/?(?:"+valiHTML.join("|")+"|img|span)[^\\]]*)\\]","gi"),"<$1>"),/firefox/.test(navigator.userAgent.toLowerCase())||(a=a.replace(/\r?\n/gi,"<br>")),$(this).html(a)})},placeholderHandler:function(){var e=this;$(this).on("click",function(){$.trim($(this).html())===e._opt.placeholader&&$(this).html("")}).on("blur",function(){$(this).html()||$(this).html(e._opt.placeholader)}),$.trim($(this).html())||$(this).html(e._opt.placeholader)},getValue:function(){return $(this).html()},setValue:function(e){$(this).html(e)}})},56:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a(46),t["default"]={data:function(){return{value:""}},methods:{getValue:function(){this.$nextTick(function(){var e=$("#articleContent").getValue();this.value=e,sessionStorage.setItem("des",e);var t=e.replace(/<[^>]+>/g,"");router.go({name:"index",query:{sec:t,sort:"des"}})})}},ready:function(){this.$nextTick(function(){$("#articleContent").artEditor({imgTar:"#imageUpload",limitSize:5,showServer:!1,uploadUrl:"",data:{},uploadField:"image",placeholader:"<p>请输入文章正文内容</p>",validHtml:["br"],uploadSuccess:function(e){return e.path},uploadError:function(e){}})})},components:{}}},104:function(e,t){e.exports=' <div class=desPage> <header class=top-hd> <div class=in-hd> <a href=javascript:; class=back-btn v-link="{path:\'/index\'}"></a> <h1 class=title>商品描述</h1> </div> </header> <section class=main-content style=background:#fff;font-size:28px> <div class=inner-content> <div id=editCon class=editCon> <input type=hidden id=target> <div class=article-content &click=inputCon id=articleContent> </div> </div> </div> </section> <footer class=footer> <div class=cross2Btn> <a href=javascript:; class="btnPub btn-first" style=position:relative>添加图片<input class=imgFile type=file accept=image/* style=position:absolute;left:0;top:0;width:344px;height:72px;overflow:hidden;opacity:0 id=imageUpload></a> <a href=javascript:; class="btnPub btn-two" id=confirmBtn @click=getValue>确认提交</a> </div> </footer> </div> '},110:function(e,t,a){var i,o;i=a(56),o=a(104),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)}});
//# sourceMappingURL=3.b1354fde342777d77366.js.map